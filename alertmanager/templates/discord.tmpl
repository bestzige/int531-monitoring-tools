{{ define "discord.title" -}}
{{ if eq .Status "firing" -}}
ğŸ”¥ ALERT FIRING
{{- else -}}
âœ… ALERT RESOLVED
{{- end }}
{{- end }}

{{ define "discord.message" -}}

{{ if eq .Status "firing" -}}
ğŸš¨ **{{ .CommonAnnotations.title | default .CommonLabels.alertname }}**
{{- else -}}
ğŸ‰ **{{ .CommonAnnotations.title | default .CommonLabels.alertname }}**
{{- end }}

**Status:** {{ if eq .Status "firing" }}ğŸ”¥ FIRING{{ else }}âœ… RESOLVED{{ end }}
**Severity:** {{ .CommonLabels.severity | default "unknown" }}
{{- if .CommonLabels.service }}
**Service:** {{ .CommonLabels.service }}
{{- end }}

---
{{ range .Alerts -}}
ğŸ–¥ï¸ **Instance:** {{ .Labels.instance | default "n/a" }}
ğŸ“„ **Description:** {{ .Annotations.description | default "no description" }}

{{- if .Annotations.runbook }}
ğŸ“˜ **Runbook:** https://github.com/bestzige/int531-monitoring-tools/tree/218/{{ .Annotations.runbook }}
{{- end }}

{{- if eq $.Status "firing" }}
â±ï¸ **Started:** {{ .StartsAt }}
{{- else }}
ğŸ•’ **Resolved:** {{ .EndsAt }}
{{- end }}
---
{{ end }}

{{ if eq .Status "resolved" -}}
ğŸ§˜ All clear. System is healthy again.
{{- end }}

{{- end }}