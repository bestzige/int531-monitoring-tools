{{- define "discord.message" -}}
{{- if eq .Status "firing" -}}ğŸš¨ **ALERT FIRING**
{{- else -}}âœ… **ALERT RESOLVED**
{{- end }}

**{{- if .CommonAnnotations.title -}}{{ .CommonAnnotations.title }}{{- else -}}{{ .CommonLabels.alertname }}{{- end -}}**
{{- if eq .CommonLabels.severity "critical" }}
@here
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¥ Status   :  {{- if eq .Status "firing" -}}FIRING{{- else -}}RESOLVED{{- end }}
ğŸš¦ Severity :  {{- if .CommonLabels.severity -}}{{ .CommonLabels.severity }}{{- else -}}Unknown{{- end }}
ğŸ§© Service  :  {{- if .CommonLabels.service -}}{{ .CommonLabels.service }}{{- else -}}N/A{{- end }}

{{- range .Alerts }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ–¥ Instance :  {{- if .Labels.instance -}}{{ .Labels.instance }}{{- else -}}N/A{{- end }}
ğŸ“„ Details  :  {{- if .Annotations.description -}}{{ .Annotations.description }}{{- else -}}No Description{{- end }}

{{- if .Annotations.runbook }}
ğŸ“˜ Runbook
https://github.com/bestzige/int531-monitoring-tools/tree/218/{{ .Annotations.runbook }}
{{- end }}

{{- if eq $.Status "firing" -}}Started{{- else -}}Resolved{{- end }} :
{{- if eq $.Status "firing" -}}
{{ .StartsAt.Format "2006-01-02 15:04:05" }}
{{- else -}}
{{ .EndsAt.Format "2006-01-02 15:04:5" }}
{{- end }}
{{- end }}

{{- if eq .Status "resolved" }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
System recovered and healthy.
{{- end }}
{{- end -}}