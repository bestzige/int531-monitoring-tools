{{- define "discord.message" -}}
{{- if eq .Status "firing" -}}ğŸš¨ **ALERT FIRING**
{{- else -}}âœ… **ALERT RESOLVED**
{{- end }}

**{{- if .CommonAnnotations.title -}}{{ .CommonAnnotations.title }}{{- else -}}{{ .CommonLabels.alertname }}{{- end -}}**

{{- if eq .CommonLabels.severity "critical" }}
@here
{{- end }}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¥ Status   : {{- if eq .Status "firing" -}}FIRING{{- else -}}RESOLVED{{- end }}
ğŸš¦ Severity : {{- .CommonLabels.severity | default "Unknown" }}
ğŸ§© Service  : {{- .CommonLabels.service  | default "N/A" }}

{{- range .Alerts }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ–¥ Instance : {{- .Labels.instance | default "N/A" }}
ğŸ“„ Details  : {{- .Annotations.description | default "No Description" }}

{{- if .Annotations.runbook }}
ğŸ“˜ Runbook
https://github.com/bestzige/int531-monitoring-tools/tree/218/{{ .Annotations.runbook }}
{{- end }}

â± {{- if eq $.Status "firing" -}}Started{{- else -}}Resolved{{- end }} :
{{- if eq $.Status "firing" -}}
{{ .StartsAt.Format "2006-01-02 15:04:05" }}
{{- else -}}
{{ .EndsAt.Format "2006-01-02 15:04:5" }}
{{- end }}
{{- end }}

{{- if eq .Status "resolved" }}
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ§˜ System recovered and healthy.
{{- end }}
{{- end -}}