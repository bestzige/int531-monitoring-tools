{{- define "discord.message" -}}

{{- if eq .Status "firing" -}}
## üö® [FIRING] {{ if .CommonAnnotations.title }}{{ .CommonAnnotations.title }}{{ else }}{{ .CommonLabels.alertname }}{{ end }}
{{- else -}}
## ‚úÖ [RESOLVED] {{ if .CommonAnnotations.title }}{{ .CommonAnnotations.title }}{{ else }}{{ .CommonLabels.alertname }}{{ end }}
{{- end }}

**Status:** `{{ if eq .Status "firing" }}FIRING{{ else }}RESOLVED{{ end }}` | **Severity:** `{{ if .CommonLabels.severity }}{{ .CommonLabels.severity }}{{ else }}UNKNOWN{{ end }}`
**Service:** `{{ if .CommonLabels.service }}{{ .CommonLabels.service }}{{ else }}N/A{{ end }}`

{{ if and (eq .Status "firing") (eq .CommonLabels.severity "critical") -}}
@here
{{- end }}
{{ range .Alerts }}
**‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ**
### üñ•Ô∏è Instance: `{{ if .Labels.instance }}{{ .Labels.instance }}{{ else }}N/A{{ end }}`

**üìù Description:**
> {{ if .Annotations.description }}{{ .Annotations.description }}{{ else }}_No description provided_{{ end }}

{{ if .Annotations.runbook -}}
**üìò Runbook:** [Click to Open](https://github.com/bestzige/int531-monitoring-tools/tree/main/{{ .Annotations.runbook }})
{{- end }}

**‚è±Ô∏è {{ if eq $.Status "firing" }}Started at:{{ else }}Resolved at:{{ end }}** `{{ if eq $.Status "firing" }}{{ .StartsAt.Format "15:04:05 (2006-01-02)" }}{{ else }}{{ .EndsAt.Format "15:04:05 (2006-01-02)" }}{{ end }}`
{{ end }}

{{ if eq .Status "resolved" -}}
**‚ú® System status is now healthy.**
{{- end }}

{{- end -}}