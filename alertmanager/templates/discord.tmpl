{{ define "discord.message" -}}

{{ if eq .Status "firing" -}}
ğŸš¨ **{{ if .CommonAnnotations.title }}{{ .CommonAnnotations.title }}{{ else }}{{ .CommonLabels.alertname }}{{ end }}**
{{- else -}}
ğŸ‰ **{{ if .CommonAnnotations.title }}{{ .CommonAnnotations.title }}{{ else }}{{ .CommonLabels.alertname }}{{ end }}**
{{- end }}

**Status:** {{ if eq .Status "firing" }}ğŸ”¥ FIRING{{ else }}âœ… RESOLVED{{ end }}
**Severity:** {{ if .CommonLabels.severity }}{{ .CommonLabels.severity }}{{ else }}unknown{{ end }}

{{- if .CommonLabels.service }}
**Service:** {{ .CommonLabels.service }}
{{- end }}

---
{{ range .Alerts -}}
ğŸ–¥ï¸ **Instance:** {{ if .Labels.instance }}{{ .Labels.instance }}{{ else }}n/a{{ end }}
ğŸ“„ **Description:** {{ if .Annotations.description }}{{ .Annotations.description }}{{ else }}no description{{ end }}

{{- if .Annotations.runbook }}
ğŸ“˜ **Runbook:** https://github.com/bestzige/int531-monitoring-tools/tree/218/{{ .Annotations.runbook }}
{{- end }}

{{- if eq $.Status "firing" }}
â±ï¸ **Started:** {{ .StartsAt }}
{{- else }}
ğŸ•’ **Resolved:** {{ .EndsAt }}
{{- end }}
---
{{ end }}

{{ if eq .Status "resolved" -}}
ğŸ§˜ All clear. System is healthy again.
{{- end }}

{{- end }}